<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>타임리프</title>
</head>
<body>
	
	<h3>Thymeleaf</h3>
	
	<ul>
		<li>Spring Boot에서 많이 사용하는 [View 생성용 탬플릿 엔진]</li>
		<li>기본의 JSP(EL/JSTL)에서 불필요한 기능을 많이 덜어내고 비슷한 기능들을 제공한다</li>
		<li>HTML의 형태를 최대한 유지하면서 편리하게 웹 페이지를 작성할 수 있다</li>
		<li>기본적으로 HTML의 속성 앞에 th:를 붙이는 방식으로 값을 끌어다 사용한다</li>
		<li>th:를 붙여서 넣는 값이 기존의 값을 덮어쓰게 된다</li>
	</ul>
	
	<h3>Thymeleaf의 리터럴</h3>
	
	<ul>
		<li th:text="123 + 123"></li>
		<li th:text="'123' + 345"></li>
		<li th:text="123 + ${fruit}"></li>
		<li th:text="|123${fruit}| + ': |text|는 문자를 이어붙이기 위해 사용'"></li>
		<li th:text="|/thymeleaf/${fruit}/add|"></li>
		<li th:text="30 / 3"></li>
		
	</ul>
	
	<h3>${}: 변수 표현식</h3>
	
	<ul>
		<li>EL에서 제공하던 변수 표현식을 사용한다</li>
		<li>기본적으로 th:를 붙인 속성 내부에서 동작한다</li>
		<li th:text="'[[$fruit]]'">[[${fruit}]]으로 사용할 수도 있다 (inline 표현식)</li>
		<li th:text="'fruit: ' + ${fruit}"></li>
		<li>fruit: [[${fruit}]]</li>
		<li>* Javascript나 css에서 inline 표현식을 사용하기 위해서는 별도의 옵션이 필요하다 *</li>
	</ul>

	<h3>@{}: 링크 표현식</h3>
	
	<ul>
		<li>원하는 경로를 만들기 위해 사용하는 표현식 (JSP의 c:url 역할)</li>
		<li>contextPath가 있는 경우 경로에 contextPath를 추가해준다</li>
		<li>절대 경로 사용: [[@{https://naver.com}]]</li>
		<li>상대 경로 사용: [[@{./add}]]</li>
		<li>도메인 경로 사용: [[@{/cloth/list}]]</li>
		<li>프로토콜 경로 사용: [[@{//naver.com}]]</li>
		<li>파라미터(쿼리 스트링) 사용하기: [[@{/fruit/detail(id = ${fruit.fid})}]]</li>
		<li>파라미터(쿼리 스트링) 여러개 사용하기: [[@{/fruit/detail(id = ${fruit.fid},fname=${fruit.fname})}]]</li>
		<li>경로에 변수 넣기: [[@{/fruit/{fid}/delete(fid=${fruit.fid})}]]</li>
		<li>경로에 변수 넣고 쿼리 스트링과 함께 사용: [[@{fruit/{fid}/modi(fid=${fruit.fid},fname=apple,fprice=500)}]]</li>
	</ul>
	
	<h3>th:text</h3>
	
	<p th:text="'th:text로 덮어쓰기'">해당 요소의 innerText를 채운다</p>
	
	<h3>th:utext</h3>
	
	<p th:utext="'innerHTML은 <b>태그</b>가 적용'">해당 요소의 innerHTML을 채운다 (태그 적용)</p>
	
	<h3>th:each</h3>
	
	<ul>
		<li>타임리프에서 반복문을 돌리기 위해 사용한다</li>
		<li>모델에 있는 iterable 객체(배열, List, Set...)를 사용해야 한다</li>
		<li>여러번 반복하고 싶은 태그의 속성에 추가하여 사용한다</li>
		<li>값을 두 개 받으면 두 번째 값은 해당 반복문의 상태 객체가 된다</li>
	</ul>
	
	<table border="3">
		<tr>
			<th>값</th>
			<th>status.index</th>
			<th>status.count</th>
			<th>status.first</th>
			<th>status.last</th>
			<th>status.even</th>
			<th>status.odd</th>
			<th>status.current</th>
		</tr>
		<tr th:each="snack, status: ${snacks}">
			<td>[[${snack}]]</td>
			<td>[[${status.index}]]</td>
			<td>[[${status.count}]]</td>
			<td>[[${status.first}]]</td>
			<td>[[${status.last}]]</td>
			<td>[[${status.even}]]</td>
			<td>[[${status.odd}]]</td>
			<td>[[${status.current}]]</td>
		</tr>
	</table>
	
	<h3>th:block</h3>
	
	<ul>
		<li>그냥 원하는 위치에 범위를 지정하고 싶어서 사용하는 타임리프 태그</li>
		<li>필요한 경우가 가끔 있다</li>
	</ul>
	
	<table border="3">
		<tr>
			<th>값</th>
			<th>status.index</th>
			<th>status.count</th>
			<th>status.first</th>
			<th>status.last</th>
			<th>status.even</th>
			<th>status.odd</th>
			<th>status.current</th>
		</tr>
		<th:block th:each="snack, status: ${snacks}">
			<tr>
				<td>[[${snack}]]</td>
				<td>[[${status.index}]]</td>
				<td>[[${status.count}]]</td>
				<td>[[${status.first}]]</td>
				<td>[[${status.last}]]</td>
				<td>[[${status.even}]]</td>
				<td>[[${status.odd}]]</td>
				<td>[[${status.current}]]</td>
			</tr>
		</th:block>
	</table>
	
	
	<h3>th:if, th:unless</h3>
	
	<ul>
		<li>th:if - 해당 조건이 참인 경우 출력</li>
		<li>th:unless - 해당 조건이 거짓인 경우 출력</li>
		<li>if ~ else가 한 묶음으로 적용되지 않고 따로 적용되므로 주의</li>
	</ul>
	
	<div th:if="${fruit.fprice} > 3000" th:text="'비싸다'" />
	<div th:unless="${fruit.fprice} > 3000" th:text="'싸다'" />
	
	<h3>삼항 연산자(condition ? a : b)</h3>
	
	<div th:text="${fruit.fprice} > 3000 ? |${fruit.fname}가 비싸요| : |${fruit.fname}가 저렴해요|" />
	
	<h3>널값 체크(value ?: default)</h3>
	
	<div th:text="${fruit.farm} ?: '기본농장'"></div>
	
	<h3>동작 안하기(_)</h3>
	
	<div th:text="${fruit.fprice} < 3000 ? '너무 비싼 가격이네요' : _ ">적절한 가격입니다.</div>
	<div th:text="${fruit.farm} ?: _">기본농장</div>
	
	<a th:href="@{/thyme/frag}">다음으로 넘어가기...(타임리프로 html 조각내서 사용하기)</a>
</body>
</html>